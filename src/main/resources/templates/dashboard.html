<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>Car Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/dashboard.css">
  </head>
  <body th:classappend="${user.role == 'admin'} ? 'admin-theme' : ''" class="d-flex justify-content-center align-items-center min-vh-100" style="padding: 30px;">
    <div class="container" style="max-width: 600px; border: 4px solid #999; border-radius: 4px; padding: 30px;">
      <h2 class="text-center mb-4">CAR DETAILS FORM</h2>

      <form method="post" action="/addCar" style="margin-left: 10%;">
        <div class="d-flex align-items-center mb-3">
          <label style="width: 100px; flex-shrink: 0;">VEHICLE</label>
          <input type="text" name="make" class="form-control" style="width: 200px;" required />
        </div>
        <div class="d-flex align-items-center mb-3">
          <label style="width: 100px; flex-shrink: 0;">MODEL</label>
          <input type="text" name="model" class="form-control" style="width: 200px;" required />
        </div>
        <div class="d-flex align-items-center mb-3">
          <label style="width: 100px; flex-shrink: 0;">YEAR OF MF</label>
          <input type="number" name="year" class="form-control" style="width: 200px;" required />
        </div>
        <button type="submit" class="btn fw-bold submit-btn" style="width: 70%; background: #c2185b; color: white;">SUBMIT</button>
      </form>

      <button class="btn fw-bold view-btn w-100 my-3" style="background: #c2185b; color: white;"
        th:text="${user.role == 'admin'} ? 'ALL CARS' : 'MY CARS'"
      ></button>

      <table class="table table-bordered">
        <thead>
          <tr>
            <th style="background: #666; color: white;">VEHICLE</th>
            <th style="background: #666; color: white;">MODEL</th>
            <th style="background: #666; color: white;">YEAR</th>
            <th th:if="${user.role == 'admin'}" style="background: #666; color: white;">Entered By</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="car : ${cars}">
            <td th:text="${car.make}"></td>
          <td th:text="${car.model}"></td>
          <td th:text="${car.year}"></td>
          <td
            th:if="${user.role == 'admin'}"
            th:text="${car.user.role == 'admin'} ? 'Admin' : 'Data'"
          ></td>
        </tr>
      </tbody>
    </table>

      <div class="text-center mt-3">
        <button class="btn fw-bold logout-btn" style="width: 50%; background: #c2185b; color: white;" onclick="window.location.href='/logout'">
          LOGOUT
        </button>
      </div>
    </div>
    <script src="/dashboard.js"></script>
  </body>
</html>
